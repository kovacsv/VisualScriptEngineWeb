<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no">
	
	<link rel="stylesheet" type="text/css" href="style/style.css">
	<script type="text/javascript" src="jquery/jquery-3.5.1.min.js"></script>
	<script type="text/javascript" src="script/application.js"></script>
	
	<script type='text/javascript'>
		var application = new Application ();

		function ContextMenuRequest (mouseX, mouseY, commandsJsonFromCpp)
		{
			var commandsJsonStr = UTF8ToString (commandsJsonFromCpp);
			var commandJson = JSON.parse (commandsJsonStr);
			application.ContextMenuRequest (mouseX, mouseY, commandJson, 'canvas');
		}

		function OnResize ()
		{
			var windowObj = $(window);
			var canvas = $('#canvas');
			
			canvas.hide ();
			var leftDiv = $('#left');
			var newWidth = windowObj.width () - leftDiv.width () - 32;
			var newHeight = windowObj.height () - 26;
			application.ResizeCanvas (newWidth, newHeight);
			canvas.show ();
		}
		
		function OnReady ()
		{
			application.InitMenu ('menu');
		}

		function OnRuntimeInitialized (module)
		{
			application.InitModule (Module);
		}
		
		function OnWindowCreated ()
		{
			OnResize ();
		}
		
		$(window).resize (function () {
			OnResize ();
		});
		
		$(document).ready (function () {
			OnReady ();
		});
	</script>
</head>

<body>
	<div class="editor">
		<div class="left" id="left">
			<div class="menu" id="menu"></div>
			<div class="links nomobile">
				<a href="https://github.com/kovacsv/VisualScriptEngineWeb"><img src="images/github.png"/></a>
			</div>
		</div>
		<canvas id="canvas" oncontextmenu="event.preventDefault ()"></canvas>
	</div>
	<script type='text/javascript'>
		var Module = {
			onRuntimeInitialized : function () {
				OnRuntimeInitialized ();
			},
			canvas : (function () {
				return document.getElementById ('canvas');
			}) ()
		};
	</script>
	<script src="WebApp.js"></script>
</body>

</html>
