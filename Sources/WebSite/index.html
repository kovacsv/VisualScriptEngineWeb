<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no">
	
	<link rel="stylesheet" type="text/css" href="style/style.css">
	<script type="text/javascript" src="jquery/jquery-3.5.1.min.js"></script>
	<script type="text/javascript" src="script/application.js"></script>
	
	<script type='text/javascript'>
		var application = new Application ();

		function ContextMenuRequest (mouseX, mouseY, commandsJsonFromCpp)
		{
			var commandsJsonStr = UTF8ToString (commandsJsonFromCpp);
			var commandJson = JSON.parse (commandsJsonStr);
			application.ContextMenuRequest (mouseX, mouseY, commandJson, 'canvas');
		}

		function OnResize ()
		{
			var frameDiv = $('#frame');
			var menuDiv = $('#menu');
			var canvas = $('#canvas');
			var newWidth = frameDiv.width  () - menuDiv.width () - 12;
			if (newWidth != canvas.width ()) {
				application.ResizeCanvas (newWidth, 500);
			}
		}
		
		function OnReady ()
		{
			application.InitMenu ('menu');
		}

		function OnRuntimeInitialized (module)
		{
			application.InitModule (Module);
			OnResize ();
		}
		
		function OnWindowCreated ()
		{
			OnResize ();
		}
		
		$(window).resize (function () {
			OnResize ();
		});
		
		$(document).ready (function () {
			OnReady ();
		});
	</script>
</head>

<body>
	<div class="frame" id="frame">
		<div class="title">VisualScriptEngineWeb</div>
		<div class="text">This is a demo of the <a href="https://emscripten.org">Emscripten</a> port of <a href="https://github.com/kovacsv/VisualScriptEngine">VisualScriptEngine</a>. You can add nodes from the list on the left and then you can connect the nodes on the editor canvas. More information on GitHub: <a href="https://github.com/kovacsv/VisualScriptEngineWeb">VisualScriptEngineWeb</a>.</div>
		<div class="editor">
			<div class="menu" id="menu">
			</div>
			<canvas id="canvas" width="700" height="500" oncontextmenu="event.preventDefault ()"></canvas>
			<div class="hint">
				Keyboard shortcuts: Escape, Delete, Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+G, Ctrl+Z, Ctrl+Y.
			</div>
		</div>
	</div>
	<script type='text/javascript'>
		var Module = {
			onRuntimeInitialized : function () {
				OnRuntimeInitialized ();
			},
			canvas : (function () {
				return document.getElementById ('canvas');
			}) ()
		};
	</script>
	<script src="WebApp.js"></script>
</body>

</html>
